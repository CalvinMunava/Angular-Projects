{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"scrollMe\"];\nfunction ChatSupportComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(message_r3.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r3.message, \" \");\n  }\n}\nfunction ChatSupportComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\");\n    i0.ɵɵtext(2, \"...\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(\"client\");\n  }\n}\nexport class ChatSupportComponent {\n  constructor(messageService) {\n    this.messageService = messageService;\n    this.isOpen = false;\n    this.loading = false;\n    this.messages = [];\n    this.chatForm = new FormGroup({\n      message: new FormControl('', [Validators.required])\n    });\n  }\n  openSupportPopup() {\n    this.isOpen = !this.isOpen;\n  }\n  sendMessage() {\n    const sentMessage = this.chatForm.value.message;\n    this.loading = true;\n    this.messages.push({\n      type: 'user',\n      message: sentMessage\n    });\n    this.chatForm.reset();\n    this.scrollToBottom();\n    this.messageService.sendMessage(sentMessage).subscribe(response => {\n      for (const obj of response) {\n        let value;\n        if (obj.hasOwnProperty('text')) {\n          value = obj['text'];\n          this.pushMessage(value);\n        }\n        if (obj.hasOwnProperty('image')) {\n          value = obj['image'];\n          this.pushMessage(value);\n        }\n      }\n    });\n  }\n  pushMessage(message) {\n    this.messages.push({\n      type: 'client',\n      message: message\n    });\n    this.scrollToBottom();\n  }\n  scrollToBottom() {\n    setTimeout(() => {\n      try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight + 500;\n      } catch (err) {}\n    }, 150);\n  }\n}\nChatSupportComponent.ɵfac = function ChatSupportComponent_Factory(t) {\n  return new (t || ChatSupportComponent)(i0.ɵɵdirectiveInject(i1.MessageService));\n};\nChatSupportComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatSupportComponent,\n  selectors: [[\"app-chat-support\"]],\n  viewQuery: function ChatSupportComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myScrollContainer = _t.first);\n    }\n  },\n  decls: 17,\n  vars: 6,\n  consts: [[\"id\", \"assistant\"], [\"id\", \"assistant-popup-button\", 3, \"click\"], [\"id\", \"assistant-popup\"], [\"id\", \"assistant-popup-header\"], [\"id\", \"assistant-popup-close-button\", 3, \"click\"], [\"id\", \"assistant-popup-body\"], [1, \"messages\"], [\"scrollMe\", \"\"], [\"class\", \"message\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"message\", \"style\", \"width: 100%; display: block\", 4, \"ngIf\"], [\"id\", \"assistant-popup-footer\", 3, \"formGroup\"], [\"formControlName\", \"message\", \"type\", \"text\", \"id\", \"assistant-popup-input\", \"placeholder\", \"Type your message here...\"], [\"id\", \"assistant-popup-submit-button\", 3, \"disabled\", \"click\"], [1, \"message\"], [1, \"message\", 2, \"width\", \"100%\", \"display\", \"block\"]],\n  template: function ChatSupportComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function ChatSupportComponent_Template_button_click_1_listener() {\n        return ctx.openSupportPopup();\n      });\n      i0.ɵɵtext(2, \" Chat Support? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n      i0.ɵɵtext(5, \" Your friendly Assistant \");\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function ChatSupportComponent_Template_button_click_6_listener() {\n        return ctx.openSupportPopup();\n      });\n      i0.ɵɵtext(7, \" X \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6, 7);\n      i0.ɵɵtemplate(11, ChatSupportComponent_div_11_Template, 3, 3, \"div\", 8);\n      i0.ɵɵtemplate(12, ChatSupportComponent_div_12_Template, 3, 2, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"form\", 10);\n      i0.ɵɵelement(14, \"input\", 11);\n      i0.ɵɵelementStart(15, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function ChatSupportComponent_Template_button_click_15_listener() {\n        return ctx.sendMessage();\n      });\n      i0.ɵɵtext(16, \" Submit \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleProp(\"display\", ctx.isOpen ? \"block\" : \"none\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.chatForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.chatForm.valid);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n  styles: [\"@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap)[_ngcontent-%COMP%];#assistant[_ngcontent-%COMP%] {\\n  font-family: \\\"Roboto\\\", sans-serif;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup-button[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 20px;\\n  right: 20px;\\n  padding: 10px 20px;\\n  background-color: #333;\\n  color: #ffffff;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  z-index: 1000;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 40px;\\n  right: 20px;\\n  width: 450px;\\n  height: 50vh;\\n  min-height: 450px;\\n  background-color: white;\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\\n  border-radius: 5px;\\n  z-index: 1000;\\n  display: none;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-header[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  font-size: 18px;\\n  padding: 10px;\\n  border-top-left-radius: 5px;\\n  border-top-right-radius: 5px;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-header[_ngcontent-%COMP%]   #assistant-popup-close-button[_ngcontent-%COMP%] {\\n  float: right;\\n  border: none;\\n  background-color: transparent;\\n  color: #fff;\\n  font-size: 14px;\\n  cursor: pointer;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-body[_ngcontent-%COMP%] {\\n  height: calc(100% - 133px);\\n  padding: 10px;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-footer[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: white;\\n  font-size: 14px;\\n  padding: 10px;\\n  border-bottom-left-radius: 5px;\\n  border-bottom-right-radius: 5px;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-footer[_ngcontent-%COMP%]   #assistant-popup-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border: 1px solid #fff;\\n  border-radius: 5px 5px 0 0;\\n  box-sizing: border-box;\\n  font-size: 14px;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   #assistant-popup-footer[_ngcontent-%COMP%]   #assistant-popup-submit-button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  background-color: #2ca1da;\\n  color: #fff;\\n  border: none;\\n  border-radius: 0 0 5px 5px;\\n  cursor: pointer;\\n  font-size: 14px;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%] {\\n  height: 100%;\\n  overflow: auto;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%] {\\n  display: flow-root;\\n  width: 100%;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .client[_ngcontent-%COMP%] {\\n  background-color: #d7d7d7;\\n  color: #333;\\n  padding: 10px;\\n  border-radius: 5px;\\n  margin-bottom: 10px;\\n  display: inline-block;\\n  max-width: 80%;\\n}\\n#assistant[_ngcontent-%COMP%]   #assistant-popup[_ngcontent-%COMP%]   .messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%] {\\n  border: 0.5px solid #333;\\n  background-color: #85ff7a;\\n  color: #333;\\n  padding: 10px;\\n  border-radius: 5px;\\n  margin-bottom: 10px;\\n  display: inline-block;\\n  max-width: 80%;\\n  text-align: right;\\n  float: right;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXNzaXN0YW50L2NoYXQtc3VwcG9ydC5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uLy4uLy4uL1Jhc2ElMjBQcmVwL2NoYXRCb3QlMjBBbmd1bGFyL3NyYy9hcHAvYXNzaXN0YW50L2NoYXQtc3VwcG9ydC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGlDQUFBO0FDQ0Y7QURBRTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxjQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxhQUFBO0FDRUo7QURDRTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLHVDQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtBQ0NKO0FEQUk7RUFDRSxzQkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsYUFBQTtFQUNBLDJCQUFBO0VBQ0EsNEJBQUE7QUNFTjtBRERNO0VBQ0UsWUFBQTtFQUNBLFlBQUE7RUFDQSw2QkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQ0dSO0FEQ0k7RUFDRSwwQkFBQTtFQUNBLGFBQUE7QUNDTjtBREVJO0VBQ0Usc0JBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7RUFDQSw4QkFBQTtFQUNBLCtCQUFBO0FDQU47QURDTTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSwwQkFBQTtFQUNBLHNCQUFBO0VBQ0EsZUFBQTtBQ0NSO0FERU07RUFDRSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSwwQkFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0FDQVI7QURJSTtFQUNFLFlBQUE7RUFDQSxjQUFBO0FDRk47QURHTTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtBQ0RSO0FERVE7RUFDRSx5QkFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLHFCQUFBO0VBQ0EsY0FBQTtBQ0FWO0FER1E7RUFDRSx3QkFBQTtFQUNBLHlCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EscUJBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSxZQUFBO0FDRFYiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IHVybChcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Um9ib3RvOndnaHRANDAwOzcwMCZkaXNwbGF5PXN3YXBcIik7XG4jYXNzaXN0YW50IHtcbiAgZm9udC1mYW1pbHk6IFwiUm9ib3RvXCIsIHNhbnMtc2VyaWY7XG4gICNhc3Npc3RhbnQtcG9wdXAtYnV0dG9uIHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgYm90dG9tOiAyMHB4O1xuICAgIHJpZ2h0OiAyMHB4O1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICB6LWluZGV4OiAxMDAwO1xuICB9XG5cbiAgI2Fzc2lzdGFudC1wb3B1cCB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIGJvdHRvbTogNDBweDtcbiAgICByaWdodDogMjBweDtcbiAgICB3aWR0aDogNDUwcHg7XG4gICAgaGVpZ2h0OiA1MHZoO1xuICAgIG1pbi1oZWlnaHQ6IDQ1MHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgei1pbmRleDogMTAwMDtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgICNhc3Npc3RhbnQtcG9wdXAtaGVhZGVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XG4gICAgICBjb2xvcjogd2hpdGU7XG4gICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNXB4O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDVweDtcbiAgICAgICNhc3Npc3RhbnQtcG9wdXAtY2xvc2UtYnV0dG9uIHtcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgI2Fzc2lzdGFudC1wb3B1cC1ib2R5IHtcbiAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMTMzcHgpO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICB9XG5cbiAgICAjYXNzaXN0YW50LXBvcHVwLWZvb3RlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDVweDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7XG4gICAgICAjYXNzaXN0YW50LXBvcHVwLWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmY7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMCAwO1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgICNhc3Npc3RhbnQtcG9wdXAtc3VibWl0LWJ1dHRvbiB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmNhMWRhO1xuICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNXB4IDVweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLm1lc3NhZ2VzIHtcbiAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgLm1lc3NhZ2Uge1xuICAgICAgICBkaXNwbGF5OiBmbG93LXJvb3Q7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAuY2xpZW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDdkN2Q3O1xuICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnVzZXIge1xuICAgICAgICAgIGJvcmRlcjogMC41cHggc29saWQgIzMzMztcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODVmZjdhO1xuICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiQGltcG9ydCB1cmwoXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVJvYm90bzp3Z2h0QDQwMDs3MDAmZGlzcGxheT1zd2FwXCIpO1xuI2Fzc2lzdGFudCB7XG4gIGZvbnQtZmFtaWx5OiBcIlJvYm90b1wiLCBzYW5zLXNlcmlmO1xufVxuI2Fzc2lzdGFudCAjYXNzaXN0YW50LXBvcHVwLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAyMHB4O1xuICByaWdodDogMjBweDtcbiAgcGFkZGluZzogMTBweCAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZm9udC1zaXplOiAxNHB4O1xuICB6LWluZGV4OiAxMDAwO1xufVxuI2Fzc2lzdGFudCAjYXNzaXN0YW50LXBvcHVwIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDQwcHg7XG4gIHJpZ2h0OiAyMHB4O1xuICB3aWR0aDogNDUwcHg7XG4gIGhlaWdodDogNTB2aDtcbiAgbWluLWhlaWdodDogNDUwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgei1pbmRleDogMTAwMDtcbiAgZGlzcGxheTogbm9uZTtcbn1cbiNhc3Npc3RhbnQgI2Fzc2lzdGFudC1wb3B1cCAjYXNzaXN0YW50LXBvcHVwLWhlYWRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA1cHg7XG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA1cHg7XG59XG4jYXNzaXN0YW50ICNhc3Npc3RhbnQtcG9wdXAgI2Fzc2lzdGFudC1wb3B1cC1oZWFkZXIgI2Fzc2lzdGFudC1wb3B1cC1jbG9zZS1idXR0b24ge1xuICBmbG9hdDogcmlnaHQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbiNhc3Npc3RhbnQgI2Fzc2lzdGFudC1wb3B1cCAjYXNzaXN0YW50LXBvcHVwLWJvZHkge1xuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDEzM3B4KTtcbiAgcGFkZGluZzogMTBweDtcbn1cbiNhc3Npc3RhbnQgI2Fzc2lzdGFudC1wb3B1cCAjYXNzaXN0YW50LXBvcHVwLWZvb3RlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA1cHg7XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA1cHg7XG59XG4jYXNzaXN0YW50ICNhc3Npc3RhbnQtcG9wdXAgI2Fzc2lzdGFudC1wb3B1cC1mb290ZXIgI2Fzc2lzdGFudC1wb3B1cC1pbnB1dCB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZmZmO1xuICBib3JkZXItcmFkaXVzOiA1cHggNXB4IDAgMDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuI2Fzc2lzdGFudCAjYXNzaXN0YW50LXBvcHVwICNhc3Npc3RhbnQtcG9wdXAtZm9vdGVyICNhc3Npc3RhbnQtcG9wdXAtc3VibWl0LWJ1dHRvbiB7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAxMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmNhMWRhO1xuICBjb2xvcjogI2ZmZjtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiAwIDAgNXB4IDVweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmb250LXNpemU6IDE0cHg7XG59XG4jYXNzaXN0YW50ICNhc3Npc3RhbnQtcG9wdXAgLm1lc3NhZ2VzIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdzogYXV0bztcbn1cbiNhc3Npc3RhbnQgI2Fzc2lzdGFudC1wb3B1cCAubWVzc2FnZXMgLm1lc3NhZ2Uge1xuICBkaXNwbGF5OiBmbG93LXJvb3Q7XG4gIHdpZHRoOiAxMDAlO1xufVxuI2Fzc2lzdGFudCAjYXNzaXN0YW50LXBvcHVwIC5tZXNzYWdlcyAubWVzc2FnZSAuY2xpZW50IHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Q3ZDdkNztcbiAgY29sb3I6ICMzMzM7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtYXgtd2lkdGg6IDgwJTtcbn1cbiNhc3Npc3RhbnQgI2Fzc2lzdGFudC1wb3B1cCAubWVzc2FnZXMgLm1lc3NhZ2UgLnVzZXIge1xuICBib3JkZXI6IDAuNXB4IHNvbGlkICMzMzM7XG4gIGJhY2tncm91bmQtY29sb3I6ICM4NWZmN2E7XG4gIGNvbG9yOiAjMzMzO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgbWF4LXdpZHRoOiA4MCU7XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICBmbG9hdDogcmlnaHQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","Validators","i0","ChatSupportComponent","constructor","messageService","message","required","openSupportPopup","isOpen","sendMessage","sentMessage","chatForm","value","loading","messages","push","type","reset","scrollToBottom","subscribe","response","obj","hasOwnProperty","pushMessage","setTimeout","myScrollContainer","nativeElement","scrollTop","scrollHeight","err","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\Calvin\\Desktop\\Rasa Prep\\chatBot Angular\\src\\app\\assistant\\chat-support.component.ts","C:\\Users\\Calvin\\Desktop\\Rasa Prep\\chatBot Angular\\src\\app\\assistant\\chat-support.component.html"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MessageService } from '../service/api.service';\n\nexport interface Message {\n  type: string;\n  message: string;\n}\n\n@Component({\n  selector: 'app-chat-support',\n  templateUrl: './chat-support.component.html',\n  styleUrls: ['./chat-support.component.scss'],\n})\nexport class ChatSupportComponent {\n  isOpen = false;\n  loading = false;\n  messages: Message[] = [];\n  chatForm = new FormGroup({\n    message: new FormControl('', [Validators.required]),\n  });\n  @ViewChild('scrollMe') private myScrollContainer: any;\n\n  constructor(private messageService: MessageService) {\n  }\n\n  openSupportPopup() {\n    this.isOpen = !this.isOpen;\n  }\n\n  sendMessage() {\n    const sentMessage = this.chatForm.value.message!;\n    this.loading = true;\n    this.messages.push({\n      type: 'user',\n      message: sentMessage,\n    });\n    this.chatForm.reset();\n    this.scrollToBottom();\n    this.messageService.sendMessage(sentMessage).subscribe((response: any) => {\n      for (const obj of response) {\n        let value\n        if (obj.hasOwnProperty('text') ) {\n          value = obj['text']\n          this.pushMessage(value)\n\n        }\n        if (obj.hasOwnProperty('image') ) {\n          value = obj['image']\n          this.pushMessage(value)\n        }\n      }\n    });\n  }\n\n  pushMessage(message:string){\n     this.messages.push({\n        type: 'client',\n        message: message,\n      });\n      this.scrollToBottom();\n  }\n\n  scrollToBottom() {\n    setTimeout(() => {\n      try {\n        this.myScrollContainer.nativeElement.scrollTop =\n          this.myScrollContainer.nativeElement.scrollHeight + 500;\n      } catch (err) {}\n    }, 150);\n  }\n}\n","<div id=\"assistant\">\n  <button id=\"assistant-popup-button\" (click)=\"openSupportPopup()\">\n    Chat Support?\n  </button>\n  <div id=\"assistant-popup\" [style.display]=\"isOpen ? 'block' : 'none'\">\n    <div id=\"assistant-popup-header\">\n      Your friendly Assistant\n      <button id=\"assistant-popup-close-button\" (click)=\"openSupportPopup()\">\n       X\n      </button>\n    </div>\n    <div id=\"assistant-popup-body\">\n      <div class=\"messages\" #scrollMe>\n        <div *ngFor=\"let message of messages\" class=\"message\">\n          <div [class]=\"message.type\">\n            {{ message.message }}\n          </div>\n        </div>\n        <div\n          *ngIf=\"loading\"\n          class=\"message\"\n          style=\"width: 100%; display: block\"\n        >\n          <div [class]=\"'client'\">...</div>\n        </div>\n      </div>\n    </div>\n    <form id=\"assistant-popup-footer\" [formGroup]=\"chatForm\">\n      <input\n        formControlName=\"message\"\n        type=\"text\"\n        id=\"assistant-popup-input\"\n        placeholder=\"Type your message here...\"\n      />\n      <button\n        id=\"assistant-popup-submit-button\"\n        [disabled]=\"!chatForm.valid\"\n        (click)=\"sendMessage()\"\n      >\n        Submit\n      </button>\n    </form>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}